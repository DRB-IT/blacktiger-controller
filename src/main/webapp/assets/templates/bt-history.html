<h3>
    <span translate="PARTICIPANTS.COMPLETED_CALLS" translate-values="{noOfCompletedCalls:history.length}"}></span>
    <a ng-click="deleteHistory();" class="btn btn-link btn-sm pull-right">{{'REPORT.DELETE' | translate}} <span class="glyphicon glyphicon-trash"></span></a>
</h3>
<table class="table table-striped table-hover table-condensed participantsTable">
    <thead>
        <tr>
            <th width="160px"><span class="sortable" ng-click="predicate = 'phoneNumber'; reverse=!reverse">{{'REPORT.NUMBER' | translate}}</span>
            </th>
            <th><span class="sortable" ng-click="predicate = 'name'; reverse=!reverse">{{'REPORT.NAME' | translate}}</span>
            </th>
            <th width="120px"><span class="sortable sorting" ng-click="predicate = 'firstCallTimestamp'; reverse=!reverse">{{'REPORT.FIRST_CALL' | translate}}</span>
            </th>
            <th width="70px"><span class="sortable" ng-click="predicate = 'numberOfCalls'; reverse=!reverse">{{'REPORT.CALLS' | translate}}</span>
            </th>
            <th width="70px"><span class="sortable" ng-click="predicate = 'totalDuration'; reverse=!reverse">{{'REPORT.MINUTES' | translate}}</span>
            </th>
            <th width="100px"></th>
        </tr>
    </thead>
    <tbody>
        <tr ng-if="history.length===0">
            <td colspan="6">{{'REPORT.NO_ENTRIES' | translate}}</td>
        </tr>
        <tr ng-repeat="entry in history | orderBy:predicate:reverse">
            <td class="participantNumber">
                <bt-number-icon type="{{entry.type}}"></bt-number-icon>
                <span ng-if="entry.type!=='Unknown'">{{entry.phoneNumber | telephone}}</span>
                <span ng-if="entry.type==='Unknown'">{{entry.phoneNumber}}</span>
            </td>
            <td class="participantName">
                <a ng-if="!(entry.name.length>0)" ng-click="changeName(entry.phoneNumber, entry.name)">({{'PARTICIPANTS.ENTER_NAME' | translate}})</a>
                {{entry.name}}
            </td>
            <td class="participantHistory">{{entry.firstCall | date:'HH:mm'}}</td>
            <td class="participantHistory">{{entry.calls.length}}</td>
            <td class="participantHistory">{{calculateTotalDuration(entry) / 60000 | number : 0}}</td>
            <td class="participantOptions">
                <button ng-click="changeName(entry.phoneNumber, entry.name)" title="{{'PARTICIPANTS.EDIT' | translate}}"><span class="glyphicon glyphicon-pencil"></span>
                </button>
            </td>
        </tr>
    </tbody>
</table>